@model ControladoresCore.ViewModels.NotasVM
@using ControladoresCore.Extensiones
@{
    ViewBag.Title = "Notas - Modificar registro";
}
<div class="row">
    <div class="col-md-10">

    </div>

</div>
@using (Html.BeginForm())
{
    using (Html.BeginCard("Editar nota"))
    {

        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.Id)

            <div class="form-group ">
                @Html.LabelFor(model => model.FechaDeVencimiento, htmlAttributes: new { @class = "col-form-label col-md-3" })
                <div class="col-md-9">

                    <div class="input-group">
                        <span class="input-group-addon bg-custom b-0"><i class="fa fa-calendar"></i></span>
                        @Html.EditorFor(model => model.FechaDeVencimiento, new { htmlAttributes = new { @class = "form-control datetimepicker", @Value = FuncionesCore.FFechas.FechaAhoraHTML5() } })
                        @Html.ValidationMessageFor(model => model.FechaDeVencimiento, "", new { @class = "text-danger" })
                    </div>

                </div>
            </div>



            <div class="form-group">
                @Html.LabelFor(model => model.Titulo, htmlAttributes: new { @class = "col-form-label col-md-3 " })
                <div class="col-md-9">

                    @Html.EditorFor(model => model.Titulo, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Titulo, "", new { @class = "text-danger" })


                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.Cuerpo, htmlAttributes: new { @class = "col-form-label col-md-3 " })
                <div class="col-md-9">

                    @Html.EditorFor(model => model.Cuerpo, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Cuerpo, "", new { @class = "text-danger" })


                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.Icono, htmlAttributes: new { @class = "control-label col-md-3" })
                <div class="col-md-9">
                    @Html.DropDownListFor(m => m.Icono, new SelectList(Model.IconosDDL, "Id", "Nombre", Model.Icono), "Seleccione una opcion...", new { @class = "form-control " })
                    @Html.ValidationMessageFor(model => model.Icono, "", new { @class = "text-danger" })
                    <i class="mdi mdi-crop-square" id="Icon" style="font-size: 80px"></i>
                </div>
            </div>
            @*TODO:Selector IconoCSSId*@


            <div class="form-group">
                @Html.LabelFor(model => model.CompartirConTodos, htmlAttributes: new { @class = "col-form-label col-md-1 " })

                @Html.EditorFor(model => model.CompartirConTodos, new { htmlAttributes = new { } })
                @Html.ValidationMessageFor(model => model.CompartirConTodos, "", new { @class = "text-danger" })



            </div>





        </div>
    }

    //{ Html.RenderPartial("_ArchivosInsert"); }




    <div class="card" id="dyn_2">
        <h4 style="padding:1px; background-color:var(--color-primary)" class="card-header mt-0"></h4>
        <div class="card-body fade-in p-2">
            <div class="col-lg-12 pull-left botonera">

                @HtmlHelperExtension.Boton("Notas", "Listado", ViewBag.Seccion)
                @HtmlHelperExtension.Boton("Update", ViewBag.DatosDeUnaPagina.AutorizadoACargarLaPagina, ViewBag.Seccion)
            </div>
        </div>
    </div>
}


<script>

    $(function() {
        $('#IconoCSSId').change(function () { GetCSS(this.value); });
        $('#IconoCSSId').trigger('change');
    });
    function GetCSS(id) {
        var datos = {
            IconoCSSId : id
        };
        $.ajax({
            url: '@Url.Action("GetIcon")',
            type: 'post',
            dataType: 'json',
            data: JSON.stringify(datos),
            contentType: 'application/json',
            success: function (retorno) {
                $('#Icon').attr("class",retorno);
            }
        });
    }

</script>
